<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Driven Geometry Analyser</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./style.css">
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">

    <div id="loading-spinner" class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="animate-spin rounded-full h-32 w-32 border-t-4 border-b-4 border-white"></div>
    </div>

    <!-- Login Page -->
    <div id="login-page" class="page active w-full max-w-md">
        <div class="card">
            <h1 class="text-3xl font-bold text-center text-gray-800 mb-2">Geometry Analyser</h1>
            <p class="text-center text-gray-500 mb-8">Welcome! Please sign in or register.</p>
            <div id="auth-error" class="text-red-500 text-center mb-4 hidden"></div>
            <div class="space-y-4">
                <div>
                    <label for="email" class="block text-sm font-medium text-gray-700">Email Address</label>
                    <input type="email" id="email" placeholder="you@example.com">
                </div>
                <div>
                    <label for="password" class="block text-sm font-medium text-gray-700">Password</label>
                    <input type="password" id="password" placeholder="••••••••">
                </div>
                <div class="flex flex-col sm:flex-row gap-4">
                    <button id="login-btn" class="btn btn-primary w-full">Login</button>
                    <button id="register-btn" class="btn btn-secondary w-full">Register</button>
                </div>
            </div>
            <p class="text-xs text-gray-400 text-center mt-6">Admin login: admin@geometry.com / password123</p>
        </div>
    </div>

    <!-- Pre-Assessment Page -->
    <div id="pre-assessment-page" class="page w-full max-w-2xl">
        <div class="card">
            <h1 class="text-2xl font-bold text-center text-gray-800 mb-6">Pre-Assessment: Check Your Knowledge</h1>
            <div id="pre-assessment-questions"></div>
            <button id="submit-pre-assessment-btn" class="btn btn-primary w-full mt-6">Submit Assessment</button>
        </div>
    </div>

    <!-- Content Page -->
    <div id="content-page" class="page w-full max-w-4xl">
        <div class="card">
            <div class="flex flex-wrap justify-between items-center gap-4 mb-6">
                <div class="flex-grow">
                    <h1 class="text-3xl font-bold text-gray-800">Geometry Basics</h1>
                    <p class="text-gray-500">Learn about shapes, their properties, and more!</p>
                </div>
                <div class="flex flex-wrap gap-2">
                    <button id="goto-final-assessment-btn" class="btn btn-primary whitespace-nowrap">Take Final Assessment</button>
                    <button id="goto-shapes-info-btn" class="btn btn-primary whitespace-nowrap">Know More About Shapes</button>
                    <button id="goto-student-dashboard-btn" class="btn btn-secondary whitespace-nowrap">My Dashboard</button>
                    <button id="logout-btn-content" class="btn btn-secondary whitespace-nowrap">Logout</button>
                </div>
            </div>
            <div id="course-content" class="prose max-w-none text-gray-700">
                <p>Loading your personalized geometry lesson...</p>
            </div>
        </div>
    </div>
    
    <!-- Final Assessment Page -->
    <div id="final-assessment-page" class="page w-full max-w-2xl">
        <div class="card">
            <h1 class="text-2xl font-bold text-center text-gray-800 mb-6">Final Assessment</h1>
            <div id="final-assessment-questions"></div>
            <button id="submit-final-assessment-btn" class="btn btn-primary w-full mt-6">Submit and See My Score</button>
        </div>
    </div>

    <!-- Student Dashboard Page -->
    <div id="student-dashboard-page" class="page w-full max-w-3xl">
        <div class="card">
             <div class="flex flex-wrap justify-between items-center gap-4 mb-6">
                <div class="flex-grow">
                    <h1 class="text-3xl font-bold text-gray-800">Your Progress</h1>
                    <p id="student-email-display" class="text-gray-500"></p>
                </div>
                <div class="flex flex-wrap gap-2">
                    <button id="back-to-content-btn" class="btn btn-secondary">Back to Content</button>
                     <button id="logout-btn-student" class="btn btn-secondary">Logout</button>
                </div>
            </div>
            <div class="bg-gray-50 p-6 rounded-lg">
                <canvas id="student-chart"></canvas>
            </div>
        </div>
    </div>

    <!-- Shapes Info Page -->
    <div id="shapes-info-page" class="page w-full max-w-4xl">
        <div class="card">
            <div class="flex flex-wrap justify-between items-center gap-4 mb-6">
                <div class="flex-grow">
                    <h1 class="text-3xl font-bold text-gray-800">Know More About Shapes</h1>
                    <p class="text-gray-500">Learn about different shapes and upload images for recognition</p>
                </div>
                <div class="flex flex-wrap gap-2">
                    <button id="back-to-content-from-shapes-btn" class="btn btn-secondary">Back to Content</button>
                    <button id="logout-btn-shapes" class="btn btn-secondary">Logout</button>
                </div>
            </div>
            
            <div class="mb-8">
                <h2 class="text-2xl font-semibold text-gray-700 mb-4">Shape Information</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <div class="bg-white p-4 rounded-lg shadow">
                        <h3 class="text-lg font-semibold mb-2">Triangle</h3>
                        <p>A polygon with three edges and three vertices. The sum of internal angles is 180°.</p>
                        <img src="./assets/tri.png" alt="Triangle" class="mt-2 mx-auto h-24 object-contain">
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow">
                        <h3 class="text-lg font-semibold mb-2">Square</h3>
                        <p>A regular quadrilateral with four equal sides and four right angles.</p>
                        <img src="./assets/square.png" alt="Square" class="mt-2 mx-auto h-24 object-contain">
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow">
                        <h3 class="text-lg font-semibold mb-2">Rectangle</h3>
                        <p>A quadrilateral with four right angles and opposite sides of equal length.</p>
                        <img src="./assets/rect.png" alt="Rectangle" class="mt-2 mx-auto h-24 object-contain">
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow">
                        <h3 class="text-lg font-semibold mb-2">Circle</h3>
                        <p>A perfectly round shape where all points are the same distance from the center.</p>
                        <img src="./assets/circle.png" alt="Circle" class="mt-2 mx-auto h-24 object-contain">
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow">
                        <h3 class="text-lg font-semibold mb-2">Pentagon</h3>
                        <p>A polygon with five straight sides and five vertices.</p>
                        <img src="./assets/pent.png" alt="Pentagon" class="mt-2 mx-auto h-24 object-contain">
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow">
                        <h3 class="text-lg font-semibold mb-2">Hexagon</h3>
                        <p>A polygon with six straight sides and six vertices.</p>
                        <img src="./assets/hex.png" alt="Hexagon" class="mt-2 mx-auto h-24 object-contain">
                    </div>
                </div>
            </div>
            
            <div class="mt-10">
                <h2 class="text-2xl font-semibold text-gray-700 mb-4">Shape Recognition</h2>
                <p class="mb-4">Upload an image to identify the shape in it.</p>
                
                <div class="bg-white p-6 rounded-lg shadow">
                    <div class="mb-4">
                        <label for="shape-image" class="block text-sm font-medium text-gray-700 mb-2">Upload Image</label>
                        <input type="file" id="shape-image" accept="image/*" class="w-full p-2 border border-gray-300 rounded">
                    </div>
                    <button id="analyze-shape-btn" class="btn btn-primary">Analyze Shape</button>
                    
                    <div id="shape-result" class="mt-6 hidden">
                        <h3 class="text-lg font-semibold mb-2">Result:</h3>
                        <div class="flex flex-col md:flex-row gap-4">
                            <div class="md:w-1/2">
                                <img id="uploaded-image" src="#" alt="Uploaded Image" class="max-w-full h-auto border rounded">
                            </div>
                            <div class="md:w-1/2">
                                <div class="p-4 bg-gray-50 rounded">
                                    <p class="text-lg"><strong>Detected Shape:</strong> <span id="detected-shape-name">-</span></p>
                                    <p class="mt-2" id="shape-properties">-</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Dashboard Page -->
    <div id="admin-dashboard-page" class="page w-full max-w-5xl">
        <div class="card">
            <div class="flex justify-between items-start mb-6">
                <h1 class="text-3xl font-bold text-gray-800">Administrator Dashboard</h1>
                <button id="logout-btn-admin" class="btn btn-secondary">Logout</button>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-gray-50 p-6 rounded-lg">
                    <h2 class="text-xl font-semibold text-gray-700 mb-4">Average Scores</h2>
                    <div class="space-y-3">
                        <p class="text-lg">Pre-Assessment Average: <span id="avg-pre-score" class="font-bold text-indigo-600">--</span></p>
                        <p class="text-lg">Final Assessment Average: <span id="avg-post-score" class="font-bold text-indigo-600">--</span></p>
                    </div>
                </div>
                <div class="bg-gray-50 p-6 rounded-lg">
                    <h2 class="text-xl font-semibold text-gray-700 mb-4">Final Score Distribution</h2>
                    <canvas id="admin-chart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="./main.js"></script>
</body>
</html>